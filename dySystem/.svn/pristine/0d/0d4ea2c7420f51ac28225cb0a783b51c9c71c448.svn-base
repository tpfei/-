<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>DataTable</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<script src="../js/dyxx.js"></script>
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
<script
	src="https://cdn.bootcss.com/datatables/1.10.16/js/jquery.dataTables.js"></script>
<style>
.content {
	margin: 50px auto;
	border: 1px solid #ccc;
}

.operation {
	margin: 10px;
}

.operation>button {
	margin: 10px;
}

#books_length {
	float: left;
	margin-left: 20px;
}

#books_filter {
	float: right;
	margin-right: 20px;
}

#books {
	margin: 5px;
}

.center-block {
	display: block;
	width: 21%;
	margin: auto;
}
</style>
</head>

<body>
	<section class="content">
		<div class="btn-group operation">
			<button id="btn_add" type="button" class="btn bg-primary">
				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
			</button>
			<button id="btn_edit" type="button" class="btn bg-info">
				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
			</button>
			<button id="btn_delete" type="button" class="btn btn-success">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
			</button>
			<button id="btn_bl" type="button" class="btn bg-primary">
				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>补录
			</button>
			<p>
			<a href="../outDangyuan.do">
				<button id="btn_bl" type="button" class="btn">
					<span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>导出名册
				</button>
			</a> <a href="../downDYMessage.do">
				<button id="btn_bl" type="button" class="btn" onclick="downMenu()">
					<span class="glyphicon glyphicon-download" aria-hidden="true"></span>导出采集表
				</button>
			</a>
			<form id="uploadForm" enctype="multipart/form-data">
				<input type="file" name="file" />
				<button id="upload" type="button" class="btn" >
					<span class="glyphicon glyphicon-upload" aria-hidden="true"></span>导入采集表
				</button>
			</form>
			</p>
		</div>

		<div class="modal fade" id="addBook" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">增加党员信息</h4>
					</div>



					<div id="addBookModal" class="modal-body">

						<div class="form-horizontal ">

							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">姓名:*</label>
								<div class="col-md-4">
									<input class="form-control" id="name" type="text">
								</div>
								<label for="name" class="col-sm-2 control-label">身份证号码:*</label>
								<div class="col-md-4">
									<input class="form-control" id="sfzhm" type="text">
								</div>
							</div>

							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">性别:*</label>
								<div class="col-md-4">
									<input class="form-control" id="sex" type="text">
								</div>
								<label for="name" class="col-sm-2 control-label">民族:*</label>
								<div class="col-md-4">
									<input class="form-control" id="mingzu" type="text">
								</div>
							</div>

							<div class="form-group">
								<label for="ID" class="col-sm-2 control-label">入党时间:</label>
								<div class="col-md-4">
									<input class="form-control" id="rdsj" type="date">
								</div>
								<label for="ID" class="col-sm-2 control-label">人员类别:</label>
								<div class="col-md-4">
									<input class="form-control" id="rylb" type="text">
								</div>
							</div>

							<div class="form-group">
								<label for="ID" class="col-sm-2 control-label">支部ID:</label>
								<div class="col-md-4">
									<input class="form-control" id="zbId" type="text">
								</div>
								<label for="ID" class="col-sm-2 control-label">联系方式:</label>
								<div class="col-md-4">
									<input class="form-control" id="lxfs" type="text">
								</div>
							</div>










							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">党员ID:*</label>
								<div class="col-md-4">
									<input class="form-control" id="dyId" type="text">
								</div>
								<label for="ID" class="col-sm-2 control-label">列为积极分子时间:</label>
								<div class="col-md-4">
									<input class="form-control" id="lwjjfzsj" type="date">
								</div>
							</div>


							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">培养联系人:</label>
								<div class="col-md-4">
									<input class="form-control" id="bylxr" type="text">
								</div>
								<label for="ID" class="col-sm-2 control-label">何时为发展对象:</label>
								<div class="col-md-4">
									<input class="form-control" id="fzdxsj" type="date">
								</div>
							</div>



							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">入党介绍人:</label>
								<div class="col-md-4">
									<input class="form-control" id="rdjxr" type="text">
								</div>
								<label for="name" class="col-sm-2 control-label">籍贯:</label>
								<div class="col-md-4">
									<input class="form-control" id="jiguan" type="text">
								</div>
							</div>

							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">党委审批时间:</label>
								<div class="col-md-4">
									<input class="form-control" id="dwspsj1" type="date">
								</div>
								<label for="ID" class="col-sm-2 control-label">转正时间:</label>
								<div class="col-md-4">
									<input class="form-control" id="zzsj" type="date">
								</div>
							</div>

							<div class="form-group">
								<label for="name" class="col-sm-2 control-label">党委审批时间:</label>
								<div class="col-md-4">
									<input class="form-control" id="dwspsj2" type="date">
								</div>
								<label for="name" class="col-sm-2 control-label">申请入党时间:</label>
								<div class="col-md-4">
									<input class="form-control" id="sqrdsj" type="date">
								</div>
							</div>
							<div class="form-group">
								<label for="Sex" class="col-sm-2 control-label">家庭住址:</label>
								<div class="col-sm-10">
									<input class="form-control" id="jtzz" type="text">
								</div>
							</div>

						</div>
					</div>
					<div class="modal-footer">
						<div class="center-block">
							<button id="cancelAdd" type="button" class="btn btn-default"
								data-dismiss="modal">取消</button>
							<button id="addBooksInfo" type="button" class="btn btn-success"
								data-dismiss="modal">保存</button>
						</div>
					</div>
				</div>
			</div>
		</div>



		<div class="modal fade" id="editBookInfo" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">修改党员信息</h4>
					</div>
					<div id="editBookModal" class="modal-body">
						<div class="form-horizontal">
							<div class="form-group">
								<label for="editname" class="col-sm-2 control-label">姓名:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editname" type="text">
								</div>
							</div>
							<div class="form-group">
								<label for="editID" class="col-sm-2 control-label">身份证号码:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editID" type="text">
								</div>
							</div>
							<div class="form-group">
								<label for="editSex" class="col-sm-2 control-label">性别:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editSex" type="text">
								</div>
							</div>
							<div class="form-group">
								<label for="editNation" class="col-sm-2 control-label">民族:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editNation" type="text">
								</div>
							</div>
							<div class="form-group">
								<label for="editbirthDate" class="col-sm-2 control-label">入党日期:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editbirthDate" type="date">
								</div>
							</div>
							<div class="form-group">
								<label for="editleibie" class="col-sm-2 control-label">人员类别:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editleibie" type="text">
								</div>
							</div>
							<div class="form-group">
								<label for="editdangzhibu" class="col-sm-2 control-label">党支部:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editdangzhibu" type="text">
								</div>
							</div>
							<div class="form-group">
								<label for="editlianxi" class="col-sm-2 control-label">联系方式:*</label>
								<div class="col-sm-10">
									<input class="form-control" id="editlianxi" type="text">
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<div class="center-block">
							<button id="cancelEdit" type="button" class="btn btn-default"
								data-dismiss="modal">取消</button>
							<button id="saveEdit" type="button" class="btn btn-success"
								data-dismiss="modal">保存</button>
						</div>
					</div>
				</div>
			</div>
		</div>







		<div class="modal fade" id="deleteBook" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">确认要删除吗？</h4>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<button id="delete" type="button" class="btn btn-danger"
							data-dismiss="modal">删除</button>
					</div>
				</div>
			</div>
		</div>






		<table id="books"
			class="table table-striped table-bordered row-border hover order-column"
			cellspacing="0" width="100%">
			<thead>
				<tr>
					<th>姓名</th>
					<th>身份证号码</th>
					<th>性别</th>
					<th>民族</th>
					<th>入党日期</th>
					<th>人员类别</th>
					<th>所在党支部</th>
					<th>联系方式</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</section>
</body>
<script>
  var data = [['hhh', '111111', '男', '汉族', '2018-11-11', '预备党员' ,'DW10001','18075642']]
  var titles = ['dyId','zbId','name','sex','jiguan','mingzu','sfzhm','rylb','sqrdsj','lwjjfzsj','bylxr','fzdxsj','rdjxr','rdsj','dwspsj1','zzsj','dwspsj2','lxfs','jtzz']
  $(function () {
    var table = $('#books').DataTable({
      data: data,
      "pagingType": "full_numbers",
      "bSort": true,
      "language": {
        "sProcessing": "处理中...",
        "sLengthMenu": "显示 _MENU_ 项结果",
        "sZeroRecords": "没有匹配结果",
        "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
        "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
        "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
        "sInfoPostFix": "",
        "sSearch": "搜索:",
        "sUrl": "",
        "sEmptyTable": "表中数据为空",
        "sLoadingRecords": "载入中...",
        "sInfoThousands": ",",
        "oPaginate": {
            "sFirst": "首页",
            "sPrevious": "上页",
            "sNext": "下页",
            "sLast": "末页"
        },
        "oAria": {
            "sSortAscending": ": 以升序排列此列",
            "sSortDescending": ": 以降序排列此列"
        }
      },
      "columnDefs": [{
        "searchable": false,
        "orderable": true,
        "targets": 0
      }],
     "order": [[1, 'asc']]
    });
    /*
    table.on('order.dt search.dt', function() {
      table.column(0, {
        search: 'applied',
        order: 'applied'
      }).nodes().each(function(cell, i) {
        cell.innerHTML = i+3 ;
      });
    }).draw();*/
    $('#books tbody').on('click', 'tr', function () {
      if ( $(this).hasClass('selected') ) {
        $(this).removeClass('selected');
      }
      else {
        table.$('tr.selected').removeClass('selected');
        $(this).addClass('selected');
      }
    });
    $("#cancelAdd").on('click', function() {
      console.log('cancelAdd');
      $("#addBookModal").find('input').val('')
    })
    
    
    
    $("#addBooksInfo").on('click', function() {
      console.log('addBooksInfo'); 
      alert('请输入内容')
      console.log(data.length); 
      if (data.length) {
     if ($("#addBookModal").find('input').val() !== '') {
        
    	 
    	 <!-- var name = $("#name").val()
          var ID = $("#ID").val()
          var Sex = $("#Sex").val()
          var Nation = $("#Nation").val()
          var birthDate = $("#birthDate").val()
          var leibie = $("#leibie").val()
          var dangzhibu = $("#dangzhibu").val()
          var lianxi = $("#lianxi").val()
          var addBookInfos = [].concat(name, ID, Sex, Nation, birthDate,leibie,dangzhibu,lianxi);
    	 -->
          var dyId=$("#dyId").val()
          var zbId=$("#zbId").val()
          var name = $("#name").val()
          var sex = $("#sex").val()
          var jiguan=$("#jiguan").val()
          var mingzu=$("#mingzu").val()
          var sfzhm=$("#sfzhm").val()
          var rylb=$("#rylb").val()
          var sqrdsj=$("#sqrdsj").val()
          var lwjjfzsj=$("#lwjjfzsj").val()
          var bylxr=$("#bylxr").val()
          var fzdxsj=$("#fzdxsj").val()
          var rdjxr=$("#rdjxr").val()
          var rdsj=$("#rdsj").val()
          var dwspsj1=$("#dwspsj1").val()
          var zzsj=$("#zzsj").val()
          var dwspsj2=$("#dwspsj2").val()
          var lxfs=$("#lxfs").val()
          var jtzz=$("#jtzz").val()
          var addBookInfos = [].concat(name,sfzhm,sex,mingzu,rdsj,rylb,zbId,lxfs,dyId,lwjjfzsj,bylxr,fzdxsj,rdjxr,jiguan,dwspsj1,zzsj,dwspsj2,sqrdsj,jtzz);
          
          
          for (var i = 0; i < addBookInfos.length; i++) {
            if (addBookInfos[i] === '') {
              <!--alert(titles[i] + '内容不能为空')-->
            }
          }
         table.row.add([name,sfzhm,sex,mingzu,rdsj,rylb,zbId,lxfs,dyId,lwjjfzsj,bylxr,fzdxsj,rdjxr,jiguan,dwspsj1,zzsj,dwspsj2,sqrdsj,jtzz]).draw();
         <!-- table.row.add([name,sfzhm,sex,mingzu,rdsj,rylb,zbId,lxfs]).draw();-->
          $("#addBookModal").find('input').val('')
        }
      } else {
        alert('请输入内容')
      }alert("保存成功")
    })
    
    
    
    
    $("#addBooksInfo").click();    
    $("#btn_add").click(function(){
      console.log('add');
      $("#addBook").modal()
    });
    $("#btn_bl").click(function(){
        console.log('bl');
        $("#addBook").modal()
      });
    $('#btn_edit').click(function () {
      console.log('edit');
      if (table.rows('.selected').data().length) {
        $("#editBookInfo").modal()
        var rowData = table.rows('.selected').data()[0];
        var inputs = $("#editBookModal").find('input')
        for (var i = 0; i < inputs.length; i++) {
          $(inputs[i]).val(rowData[i])
        }
      } else {
        alert('请选择项目');
      }
    });
    $("#saveEdit").click(function() {
      var editname = $("#editname").val()
      var editID = $("#editID").val()
      var editSex = $("#editSex").val()
      var editNation = $("#editNation").val()
      var editbirthDate = $("#editbirthDate").val()
      var editleibie = $("#editleibie").val()
      var editdangzhibu = $("#editdangzhibu").val()
      var editlianxi = $("#editlianxi").val()
      var newRowData = [].concat(editname, editID, editSex, editNation, editbirthDate, editleibie, editdangzhibu, editlianxi);
      var tds = Array.prototype.slice.call($('.selected td'))
      for (var i = 0; i < newRowData.length; i++) {
        if (newRowData[i] !== '') {
          tds[i].innerHTML = newRowData[i];
        } else {
          alert(titles[i] + '内容不能为空')
        }
      }    
    })
    $("#cancelEdit").click(function() {
      console.log('cancelAdd');
      $("#editBookModal").find('input').val('')
    })
    $('#btn_delete').click(function () {
      if (table.rows('.selected').data().length) {
        $("#deleteBook").modal()
      } else {
        alert('请选择项目');
      }
    });
    $('#delete').click(function () {
      table.row('.selected').remove().draw(false);
    });
  })
</script>

</html>